import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

import java.util.stream.Collectors;

public class HotelApp extends Application {
    Hotel hotel = new Hotel(); // Assumes Hotel class is defined elsewhere
    ListView<String> roomListView = new ListView<>();

    @Override
    public void start(Stage primaryStage) {
        VBox root = new VBox(10);
        root.setPadding(new Insets(10));

        updateRoomList();

        TextField firstNameField = new TextField();
        firstNameField.setPromptText("First Name");
        TextField lastNameField = new TextField();
        lastNameField.setPromptText("Last Name");
        TextField contactField = new TextField();
        contactField.setPromptText("Contact Info");

        ComboBox<String> bedPrefBox = new ComboBox<>();
        bedPrefBox.getItems().addAll("King", "Two Queens");
        bedPrefBox.setValue("King");

        CheckBox smokingBox = new CheckBox("Smoking Room");

        Button assignButton = new Button("Assign Room");
        Label statusLabel = new Label();

        assignButton.setOnAction(e -> {
            Guest guest = new Guest(
                    firstNameField.getText(),
                    lastNameField.getText(),
                    contactField.getText(),
                    bedPrefBox.getValue(),
                    smokingBox.isSelected()
            );
            if (hotel.assignRoom(guest)) {
                statusLabel.setText("Room assigned successfully!");
                updateRoomList();
            } else {
                statusLabel.setText("No available room matching preferences.");
            }
        });

        root.getChildren().addAll(
                new Label("Guest Info"),
                firstNameField, lastNameField, contactField,
                new Label("Room Preferences"),
                bedPrefBox, smokingBox,
                assignButton, statusLabel,
                new Label("Room Status"),
                roomListView
        );

        Scene scene = new Scene(root, 400, 600);
        primaryStage.setScene(scene);
        primaryStage.setTitle("Hotel Inventory System");
        primaryStage.show();
    }

    private void updateRoomList() {
        roomListView.getItems().setAll(
                hotel.getAllRooms().stream()
                        .map(Room::toString)
                        .collect(Collectors.toList())
        );
    }

    public static void main(String[] args) {
        launch(args);
    }
}
